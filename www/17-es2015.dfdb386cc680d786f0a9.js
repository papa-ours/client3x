(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{bgPD:function(l,n,e){"use strict";e.r(n);var u=e("8Y7J"),t=e("mrSG"),r=e("HfhE"),i=e("he5r"),o=e("IheW");let a=(()=>{class l{constructor(l){this.http=l}getNameValidation(l){return this.http.get(`${i.a}api/player/validate/${l}`).toPromise()}sendPlayers(l,n){return this.http.post(`${i.a}api/player`,{game:l,names:n})}}return l.ngInjectableDef=u.Ob({factory:function(){return new l(u.Pb(o.c))},token:l,providedIn:"root"}),l})();var s=e("ZZ/e");class b{constructor(l,n,e,u,t){this.toastController=l,this.playerService=n,this.gameService=e,this.route=u,this.router=t,this.playerNames=["",""]}ngOnInit(){this.route.params.subscribe(l=>{this.gameService.getGame(l.name).subscribe(l=>{this.game=l})})}goToGameSelection(){this.router.navigateByUrl("game-selection").catch(l=>{console.error(l.message)})}addPlayer(){this.playerNames.push("")}removePlayer(){this.playerNames.pop()}validatePlayerName(l){return t.b(this,void 0,void 0,(function*(){if(0===l.length)throw Error("Player's name cannot be empty");const n=yield this.playerService.getNameValidation(l);if("string"==typeof n)throw Error(n)}))}showMessage(l){return t.b(this,void 0,void 0,(function*(){(yield this.toastController.create({header:l,duration:3e3,position:"top",buttons:[{text:"OK",role:"cancel"}]})).present()}))}validatePlayerNames(l){return t.b(this,void 0,void 0,(function*(){const n=[];return Promise.all(this.playerNames.map((e,u)=>t.b(this,void 0,void 0,(function*(){const e=l.target["player"+(u+1)].value;if(yield this.validatePlayerName(e),n.indexOf(e)>=0)throw Error("Player names must be unique");return n.push(e),e}))))}))}confirmPlayers(l){return t.b(this,void 0,void 0,(function*(){try{this.playerNames=yield this.validatePlayerNames(l),this.sendPlayers()}catch(n){this.showMessage(n.message)}}))}goToParametersPage(l){this.router.navigateByUrl("params/"+l).catch(l=>{console.error(l.message)})}sendPlayers(){this.playerService.sendPlayers(this.game.name,this.playerNames).subscribe(l=>{this.goToParametersPage(l)})}}class c{}var m=e("pMnS"),h=e("oBZk"),d=e("s7LF"),g=e("SVse"),p=e("iInd"),y=u.pb({encapsulation:0,styles:[["ion-buttons[_ngcontent-%COMP%], ion-buttons[_ngcontent-%COMP%] ~ ion-button[_ngcontent-%COMP%]{position:relative;left:1%;width:98%}ion-buttons[_ngcontent-%COMP%] > ion-button[_ngcontent-%COMP%]{position:relative;left:1%;width:48%}"]],data:{}});function v(l){return u.Lb(0,[(l()(),u.rb(0,0,null,null,5,"ion-item",[],null,null,null,h.D,h.n)),u.qb(1,49152,null,0,s.E,[u.h,u.k,u.x],null,null),(l()(),u.rb(2,0,null,0,3,"ion-input",[["required",""],["type","text"]],null,[[null,"ionBlur"],[null,"ionChange"]],(function(l,n,e){var t=!0;return"ionBlur"===n&&(t=!1!==u.Db(l,5)._handleBlurEvent(e.target)&&t),"ionChange"===n&&(t=!1!==u.Db(l,5)._handleInputEvent(e.target)&&t),t}),h.C,h.m)),u.Gb(5120,null,d.c,(function(l){return[l]}),[s.Ib]),u.qb(4,49152,null,0,s.D,[u.h,u.k,u.x],{name:[0,"name"],placeholder:[1,"placeholder"],required:[2,"required"],type:[3,"type"],value:[4,"value"]},null),u.qb(5,16384,null,0,s.Ib,[u.k],null,null)],(function(l,n){l(n,4,0,u.vb(1,"","player"+(n.context.index+1),""),u.vb(1,"","Player "+(n.context.index+1),""),"","text",n.context.$implicit)}),null)}function f(l){return u.Lb(0,[(l()(),u.rb(0,0,null,null,33,"ion-card",[],null,null,null,h.x,h.d)),u.qb(1,49152,null,0,s.j,[u.h,u.k,u.x],null,null),(l()(),u.rb(2,0,null,0,9,"ion-card-header",[],null,null,null,h.u,h.f)),u.qb(3,49152,null,0,s.l,[u.h,u.k,u.x],null,null),(l()(),u.rb(4,0,null,0,1,"ion-icon",[["name","close"]],null,[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.goToGameSelection()&&u),u}),h.B,h.l)),u.qb(5,49152,null,0,s.z,[u.h,u.k,u.x],{name:[0,"name"]},null),(l()(),u.rb(6,0,null,0,2,"ion-card-title",[],null,null,null,h.w,h.h)),u.qb(7,49152,null,0,s.n,[u.h,u.k,u.x],null,null),(l()(),u.Jb(8,0,["",""])),(l()(),u.rb(9,0,null,0,2,"ion-card-subtitle",[],null,null,null,h.v,h.g)),u.qb(10,49152,null,0,s.m,[u.h,u.k,u.x],null,null),(l()(),u.Jb(11,0,["Add up to "," players"])),(l()(),u.rb(12,0,null,0,21,"ion-card-content",[],null,null,null,h.t,h.e)),u.qb(13,49152,null,0,s.k,[u.h,u.k,u.x],null,null),(l()(),u.rb(14,0,null,0,19,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(l,n,e){var t=!0,r=l.component;return"submit"===n&&(t=!1!==u.Db(l,16).onSubmit(e)&&t),"reset"===n&&(t=!1!==u.Db(l,16).onReset()&&t),"ngSubmit"===n&&(t=!1!==r.confirmPlayers(e)&&t),t}),null,null)),u.qb(15,16384,null,0,d.k,[],null,null),u.qb(16,4210688,null,0,d.g,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),u.Gb(2048,null,d.a,null,[d.g]),u.qb(18,16384,null,0,d.f,[[4,d.a]],null,null),(l()(),u.gb(16777216,null,null,1,null,v)),u.qb(20,278528,null,0,g.j,[u.M,u.J,u.q],{ngForOf:[0,"ngForOf"]},null),(l()(),u.rb(21,0,null,null,7,"ion-buttons",[],null,null,null,h.s,h.c)),u.qb(22,49152,null,0,s.i,[u.h,u.k,u.x],null,null),(l()(),u.rb(23,0,null,0,2,"ion-button",[["color","primary"],["slot","start"]],null,[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.addPlayer()&&u),u}),h.r,h.b)),u.qb(24,49152,null,0,s.h,[u.h,u.k,u.x],{color:[0,"color"],disabled:[1,"disabled"]},null),(l()(),u.Jb(-1,0,[" ADD "])),(l()(),u.rb(26,0,null,0,2,"ion-button",[["color","danger"],["slot","end"]],null,[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.removePlayer()&&u),u}),h.r,h.b)),u.qb(27,49152,null,0,s.h,[u.h,u.k,u.x],{color:[0,"color"],disabled:[1,"disabled"]},null),(l()(),u.Jb(-1,0,[" REMOVE "])),(l()(),u.rb(29,0,null,null,4,"ion-button",[["block",""],["color","success"],["type","submit"]],null,null,null,h.r,h.b)),u.qb(30,49152,null,0,s.h,[u.h,u.k,u.x],{color:[0,"color"],type:[1,"type"]},null),(l()(),u.rb(31,0,null,0,1,"ion-icon",[["name","check"],["slot","end"]],null,null,null,h.B,h.l)),u.qb(32,49152,null,0,s.z,[u.h,u.k,u.x],{name:[0,"name"]},null),(l()(),u.Jb(-1,0,[" OK "]))],(function(l,n){var e=n.component;l(n,5,0,"close"),l(n,20,0,e.playerNames),l(n,24,0,"primary",e.playerNames.length==e.game.maxPlayers),l(n,27,0,"danger",1==e.playerNames.length),l(n,30,0,"success","submit"),l(n,32,0,"check")}),(function(l,n){var e=n.component;l(n,8,0,e.game.name),l(n,11,0,e.game.maxPlayers),l(n,14,0,u.Db(n,18).ngClassUntouched,u.Db(n,18).ngClassTouched,u.Db(n,18).ngClassPristine,u.Db(n,18).ngClassDirty,u.Db(n,18).ngClassValid,u.Db(n,18).ngClassInvalid,u.Db(n,18).ngClassPending)}))}function x(l){return u.Lb(0,[(l()(),u.rb(0,0,null,null,13,"ion-content",[],null,null,null,h.z,h.j)),u.qb(1,49152,null,0,s.r,[u.h,u.k,u.x],null,null),(l()(),u.rb(2,0,null,0,11,"ion-grid",[["fixed",""]],null,null,null,h.A,h.k)),u.qb(3,49152,null,0,s.x,[u.h,u.k,u.x],{fixed:[0,"fixed"]},null),(l()(),u.rb(4,0,null,0,9,"ion-row",[],null,null,null,h.F,h.p)),u.qb(5,49152,null,0,s.gb,[u.h,u.k,u.x],null,null),(l()(),u.rb(6,0,null,0,1,"ion-col",[["size-lg","3"],["size-md","2"],["size-sm","1"],["size-xl","4"],["size-xs","0"]],null,null,null,h.y,h.i)),u.qb(7,49152,null,0,s.q,[u.h,u.k,u.x],null,null),(l()(),u.rb(8,0,null,0,3,"ion-col",[["size-lg","6"],["size-md","8"],["size-sm","10"],["size-xl","4"],["size-xs","12"]],null,null,null,h.y,h.i)),u.qb(9,49152,null,0,s.q,[u.h,u.k,u.x],null,null),(l()(),u.gb(16777216,null,0,1,null,f)),u.qb(11,16384,null,0,g.k,[u.M,u.J],{ngIf:[0,"ngIf"]},null),(l()(),u.rb(12,0,null,0,1,"ion-col",[["size-md","2"],["size-sm","0"]],null,null,null,h.y,h.i)),u.qb(13,49152,null,0,s.q,[u.h,u.k,u.x],null,null)],(function(l,n){var e=n.component;l(n,3,0,""),l(n,11,0,e.game)}),null)}function k(l){return u.Lb(0,[(l()(),u.rb(0,0,null,null,1,"app-players-creation",[],null,null,null,x,y)),u.qb(1,114688,null,0,b,[s.Jb,a,r.a,p.a,p.m],null,null)],(function(l,n){l(n,1,0)}),null)}var P=u.nb("app-players-creation",b,k,{},{},[]);e.d(n,"PlayersCreationPageModuleNgFactory",(function(){return q}));var q=u.ob(c,[],(function(l){return u.Ab([u.Bb(512,u.j,u.Z,[[8,[m.a,P]],[3,u.j],u.v]),u.Bb(4608,g.m,g.l,[u.s,[2,g.u]]),u.Bb(4608,d.j,d.j,[]),u.Bb(4608,s.a,s.a,[u.x,u.g]),u.Bb(4608,s.Db,s.Db,[s.a,u.j,u.p]),u.Bb(4608,s.Hb,s.Hb,[s.a,u.j,u.p]),u.Bb(1073742336,g.b,g.b,[]),u.Bb(1073742336,d.i,d.i,[]),u.Bb(1073742336,d.b,d.b,[]),u.Bb(1073742336,s.Bb,s.Bb,[]),u.Bb(1073742336,p.n,p.n,[[2,p.s],[2,p.m]]),u.Bb(1073742336,c,c,[]),u.Bb(1024,p.k,(function(){return[[{path:"",component:b}]]}),[])])}))}}]);