(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{bgPD:function(n,l,t){"use strict";t.r(l);var e=t("CcnG"),u=t("mrSG"),r=t("HfhE"),o=t("he5r"),i=t("t/Na"),a=function(){function n(n){this.http=n}return n.prototype.getNameValidation=function(n){return this.http.get(o.a+"api/player/validate/"+n).toPromise()},n.prototype.sendPlayers=function(n,l){return this.http.post(o.a+"api/player",{game:n,names:l})},n.ngInjectableDef=e.Qb({factory:function(){return new n(e.Rb(i.c))},token:n,providedIn:"root"}),n}(),s=t("ZZ/e"),c=function(){function n(n,l,t,e,u){this.toastController=n,this.playerService=l,this.gameService=t,this.route=e,this.router=u,this.playerNames=["",""]}return n.prototype.ngOnInit=function(){var n=this;this.route.params.subscribe((function(l){n.gameService.getGame(l.name).subscribe((function(l){n.game=l}))}))},n.prototype.goToGameSelection=function(){this.router.navigateByUrl("game-selection").catch((function(n){console.error(n.message)}))},n.prototype.addPlayer=function(){this.playerNames.push("")},n.prototype.removePlayer=function(){this.playerNames.pop()},n.prototype.validatePlayerName=function(n){return u.b(this,void 0,void 0,(function(){var l;return u.e(this,(function(t){switch(t.label){case 0:if(0===n.length)throw Error("Player's name cannot be empty");return[4,this.playerService.getNameValidation(n)];case 1:if("string"==typeof(l=t.sent()))throw Error(l);return[2]}}))}))},n.prototype.showMessage=function(n){return u.b(this,void 0,void 0,(function(){return u.e(this,(function(l){switch(l.label){case 0:return[4,this.toastController.create({header:n,duration:3e3,position:"top",buttons:[{text:"OK",role:"cancel"}]})];case 1:return l.sent().present(),[2]}}))}))},n.prototype.validatePlayerNames=function(n){return u.b(this,void 0,void 0,(function(){var l,t=this;return u.e(this,(function(e){return l=[],[2,Promise.all(this.playerNames.map((function(e,r){return u.b(t,void 0,void 0,(function(){var t;return u.e(this,(function(e){switch(e.label){case 0:return[4,this.validatePlayerName(t=n.target["player"+(r+1)].value)];case 1:if(e.sent(),l.indexOf(t)>=0)throw Error("Player names must be unique");return l.push(t),[2,t]}}))}))})))]}))}))},n.prototype.confirmPlayers=function(n){return u.b(this,void 0,void 0,(function(){var l,t;return u.e(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),l=this,[4,this.validatePlayerNames(n)];case 1:return l.playerNames=e.sent(),this.sendPlayers(),[3,3];case 2:return t=e.sent(),this.showMessage(t.message),[3,3];case 3:return[2]}}))}))},n.prototype.goToParametersPage=function(n){this.router.navigateByUrl("params/"+n).catch((function(n){console.error(n.message)}))},n.prototype.sendPlayers=function(){var n=this;this.playerService.sendPlayers(this.game.name,this.playerNames).subscribe((function(l){n.goToParametersPage(l)}))},n}(),b=function(){return function(){}}(),p=t("pMnS"),h=t("oBZk"),m=t("gIcY"),d=t("Ip0R"),g=t("ZYCi"),f=e.rb({encapsulation:0,styles:[["ion-buttons[_ngcontent-%COMP%], ion-buttons[_ngcontent-%COMP%] ~ ion-button[_ngcontent-%COMP%]{position:relative;left:1%;width:98%}ion-buttons[_ngcontent-%COMP%] > ion-button[_ngcontent-%COMP%]{position:relative;left:1%;width:48%}"]],data:{}});function y(n){return e.Nb(0,[(n()(),e.tb(0,0,null,null,5,"ion-item",[],null,null,null,h.D,h.n)),e.sb(1,49152,null,0,s.E,[e.h,e.k,e.z],null,null),(n()(),e.tb(2,0,null,0,3,"ion-input",[["required",""],["type","text"]],null,[[null,"ionBlur"],[null,"ionChange"]],(function(n,l,t){var u=!0;return"ionBlur"===l&&(u=!1!==e.Fb(n,5)._handleBlurEvent(t.target)&&u),"ionChange"===l&&(u=!1!==e.Fb(n,5)._handleInputEvent(t.target)&&u),u}),h.C,h.m)),e.Ib(5120,null,m.c,(function(n){return[n]}),[s.Ib]),e.sb(4,49152,null,0,s.D,[e.h,e.k,e.z],{name:[0,"name"],placeholder:[1,"placeholder"],required:[2,"required"],type:[3,"type"],value:[4,"value"]},null),e.sb(5,16384,null,0,s.Ib,[e.k],null,null)],(function(n,l){n(l,4,0,e.xb(1,"","player"+(l.context.index+1),""),e.xb(1,"","Player "+(l.context.index+1),""),"","text",l.context.$implicit)}),null)}function v(n){return e.Nb(0,[(n()(),e.tb(0,0,null,null,33,"ion-card",[],null,null,null,h.x,h.d)),e.sb(1,49152,null,0,s.j,[e.h,e.k,e.z],null,null),(n()(),e.tb(2,0,null,0,9,"ion-card-header",[],null,null,null,h.u,h.f)),e.sb(3,49152,null,0,s.l,[e.h,e.k,e.z],null,null),(n()(),e.tb(4,0,null,0,1,"ion-icon",[["name","close"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.goToGameSelection()&&e),e}),h.B,h.l)),e.sb(5,49152,null,0,s.z,[e.h,e.k,e.z],{name:[0,"name"]},null),(n()(),e.tb(6,0,null,0,2,"ion-card-title",[],null,null,null,h.w,h.h)),e.sb(7,49152,null,0,s.n,[e.h,e.k,e.z],null,null),(n()(),e.Lb(8,0,["",""])),(n()(),e.tb(9,0,null,0,2,"ion-card-subtitle",[],null,null,null,h.v,h.g)),e.sb(10,49152,null,0,s.m,[e.h,e.k,e.z],null,null),(n()(),e.Lb(11,0,["Add up to "," players"])),(n()(),e.tb(12,0,null,0,21,"ion-card-content",[],null,null,null,h.t,h.e)),e.sb(13,49152,null,0,s.k,[e.h,e.k,e.z],null,null),(n()(),e.tb(14,0,null,0,19,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(n,l,t){var u=!0,r=n.component;return"submit"===l&&(u=!1!==e.Fb(n,16).onSubmit(t)&&u),"reset"===l&&(u=!1!==e.Fb(n,16).onReset()&&u),"ngSubmit"===l&&(u=!1!==r.confirmPlayers(t)&&u),u}),null,null)),e.sb(15,16384,null,0,m.k,[],null,null),e.sb(16,4210688,null,0,m.g,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),e.Ib(2048,null,m.a,null,[m.g]),e.sb(18,16384,null,0,m.f,[[4,m.a]],null,null),(n()(),e.ib(16777216,null,null,1,null,y)),e.sb(20,278528,null,0,d.j,[e.O,e.L,e.s],{ngForOf:[0,"ngForOf"]},null),(n()(),e.tb(21,0,null,null,7,"ion-buttons",[],null,null,null,h.s,h.c)),e.sb(22,49152,null,0,s.i,[e.h,e.k,e.z],null,null),(n()(),e.tb(23,0,null,0,2,"ion-button",[["color","primary"],["slot","start"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.addPlayer()&&e),e}),h.r,h.b)),e.sb(24,49152,null,0,s.h,[e.h,e.k,e.z],{color:[0,"color"],disabled:[1,"disabled"]},null),(n()(),e.Lb(-1,0,[" ADD "])),(n()(),e.tb(26,0,null,0,2,"ion-button",[["color","danger"],["slot","end"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.removePlayer()&&e),e}),h.r,h.b)),e.sb(27,49152,null,0,s.h,[e.h,e.k,e.z],{color:[0,"color"],disabled:[1,"disabled"]},null),(n()(),e.Lb(-1,0,[" REMOVE "])),(n()(),e.tb(29,0,null,null,4,"ion-button",[["block",""],["color","success"],["type","submit"]],null,null,null,h.r,h.b)),e.sb(30,49152,null,0,s.h,[e.h,e.k,e.z],{color:[0,"color"],type:[1,"type"]},null),(n()(),e.tb(31,0,null,0,1,"ion-icon",[["name","check"],["slot","end"]],null,null,null,h.B,h.l)),e.sb(32,49152,null,0,s.z,[e.h,e.k,e.z],{name:[0,"name"]},null),(n()(),e.Lb(-1,0,[" OK "]))],(function(n,l){var t=l.component;n(l,5,0,"close"),n(l,20,0,t.playerNames),n(l,24,0,"primary",t.playerNames.length==t.game.maxPlayers),n(l,27,0,"danger",1==t.playerNames.length),n(l,30,0,"success","submit"),n(l,32,0,"check")}),(function(n,l){var t=l.component;n(l,8,0,t.game.name),n(l,11,0,t.game.maxPlayers),n(l,14,0,e.Fb(l,18).ngClassUntouched,e.Fb(l,18).ngClassTouched,e.Fb(l,18).ngClassPristine,e.Fb(l,18).ngClassDirty,e.Fb(l,18).ngClassValid,e.Fb(l,18).ngClassInvalid,e.Fb(l,18).ngClassPending)}))}function k(n){return e.Nb(0,[(n()(),e.tb(0,0,null,null,13,"ion-content",[],null,null,null,h.z,h.j)),e.sb(1,49152,null,0,s.r,[e.h,e.k,e.z],null,null),(n()(),e.tb(2,0,null,0,11,"ion-grid",[["fixed",""]],null,null,null,h.A,h.k)),e.sb(3,49152,null,0,s.x,[e.h,e.k,e.z],{fixed:[0,"fixed"]},null),(n()(),e.tb(4,0,null,0,9,"ion-row",[],null,null,null,h.F,h.p)),e.sb(5,49152,null,0,s.gb,[e.h,e.k,e.z],null,null),(n()(),e.tb(6,0,null,0,1,"ion-col",[["size-lg","3"],["size-md","2"],["size-sm","1"],["size-xl","4"],["size-xs","0"]],null,null,null,h.y,h.i)),e.sb(7,49152,null,0,s.q,[e.h,e.k,e.z],null,null),(n()(),e.tb(8,0,null,0,3,"ion-col",[["size-lg","6"],["size-md","8"],["size-sm","10"],["size-xl","4"],["size-xs","12"]],null,null,null,h.y,h.i)),e.sb(9,49152,null,0,s.q,[e.h,e.k,e.z],null,null),(n()(),e.ib(16777216,null,0,1,null,v)),e.sb(11,16384,null,0,d.k,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(n()(),e.tb(12,0,null,0,1,"ion-col",[["size-md","2"],["size-sm","0"]],null,null,null,h.y,h.i)),e.sb(13,49152,null,0,s.q,[e.h,e.k,e.z],null,null)],(function(n,l){var t=l.component;n(l,3,0,""),n(l,11,0,t.game)}),null)}function z(n){return e.Nb(0,[(n()(),e.tb(0,0,null,null,1,"app-players-creation",[],null,null,null,k,f)),e.sb(1,114688,null,0,c,[s.Jb,a,r.a,g.a,g.m],null,null)],(function(n,l){n(l,1,0)}),null)}var P=e.pb("app-players-creation",c,z,{},{},[]);t.d(l,"PlayersCreationPageModuleNgFactory",(function(){return x}));var x=e.qb(b,[],(function(n){return e.Cb([e.Db(512,e.j,e.bb,[[8,[p.a,P]],[3,e.j],e.x]),e.Db(4608,d.m,d.l,[e.u,[2,d.u]]),e.Db(4608,m.j,m.j,[]),e.Db(4608,s.a,s.a,[e.z,e.g]),e.Db(4608,s.Db,s.Db,[s.a,e.j,e.q]),e.Db(4608,s.Hb,s.Hb,[s.a,e.j,e.q]),e.Db(1073742336,d.b,d.b,[]),e.Db(1073742336,m.i,m.i,[]),e.Db(1073742336,m.b,m.b,[]),e.Db(1073742336,s.Bb,s.Bb,[]),e.Db(1073742336,g.n,g.n,[[2,g.s],[2,g.m]]),e.Db(1073742336,b,b,[]),e.Db(1024,g.k,(function(){return[[{path:"",component:c}]]}),[])])}))}}]);